# Добавляем отчёт «Взаиморасчёты с контрагентами»

- включаем в подсистему «Сделки»;

![Отчет взаиморасчеты](%D0%9E%D1%82%D1%87%D0%B5%D1%82%20%D0%B2%D0%B7%D0%B0%D0%B8%D0%BC%D0%BE%D1%80%D0%B0%D1%81%D1%87%D0%B5%D1%82%D1%8B.png)

создаём основную схему компоновки данных;
добавляем набор данных — запрос, в котором выбираем контрагента, сумму: начальный остаток, приход, расход и конечный остаток из виртуальной таблицы «ОстаткиИОбороты» регистра «Взаиморасчёты» без параметров;

![Набор данных](%D0%9D%D0%B0%D0%B1%D0%BE%D1%80%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85.png)

на закладке «Ресурсы» добавляем все суммы: начальный остаток, приход, расход и конечный остаток с настройками по умолчанию;

![Ресурсы](%D0%A0%D0%B5%D1%81%D1%83%D1%80%D1%81%D1%8B.png)

в настройках:
добавляем группировку по контрагенту;
на закладке «Выбранные поля» выбираем поле «Контрагент» и все суммы;
на закладке «Отбор» добавляем поле «Контрагент» и включаем быстрый доступ;

![Настройка](%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0.png)

# Добавляем отчёт «Движение товаров»

создаём основную схему компоновки данных,добавляем набор данных — запрос, в котором выбираем номенклатуру, сумму и количество: начальный остаток, приход, расход и конечный остаток из виртуальной таблицы «ОстаткиИОбороты» регистра «Товары» без параметров;

![Набор данных](%D0%9D%D0%B0%D0%B1%D0%BE%D1%80%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85.png)

на закладке «Ресурсы» добавляем все суммы и количества: начальный остаток, приход, расход и конечный остаток. В колонке «Рассчитывать по» для количеств оставляем только расчёт по номенклатуре без иерархии, чтобы не складывать разнородные количества;

![Ресурсы движения товаров](%D0%A0%D0%B5%D1%81%D1%83%D1%80%D1%81%D1%8B%20%D0%B4%D0%B2%D0%B8%D0%B6%D0%B5%D0%BD%D0%B8%D1%8F%20%D1%82%D0%BE%D0%B2%D0%B0%D1%80%D0%BE%D0%B2.png)

в настройках:
добавляем группировку по номенклатуре с иерархией;
на закладке «Параметры» включаем использование автоматически добавленных параметров «Начало периода» и «Конец периода»; включаем их в пользовательские настройки с быстрым доступом;

![Настройка движения товаров](%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B8%20%D0%B4%D0%B2%D0%B8%D0%B6%D0%B5%D0%BD%D0%B8%D1%8F%20%D1%82%D0%BE%D0%B2%D0%B0%D1%80%D0%BE%D0%B2.png)

на закладке «Выбранные поля» выбираем поле «Номенклатура», все суммы и количества. Суммы и количества объединяем в группы «Начальный остаток», «Приход», «Расход», «Конечный остаток». Суммам и количествам, выбрав в контекстном меню команду «Заголовок», даём краткие заголовки, достаточные в контексте группы: «Количество», «Сумма»;

![Выбранные поля движения товаров](%D0%92%D1%8B%D0%B1%D1%80%D0%B0%D0%BD%D0%BD%D1%8B%D0%B5%20%D0%BF%D0%BE%D0%BB%D1%8F%20%D0%B4%D0%B2%D0%B8%D0%B6%D0%B5%D0%BD%D0%B8%D1%8F%20%D1%82%D0%BE%D0%B2%D0%B0%D1%80%D0%BE%D0%B2.png)

на закладке «Отбор» добавляем поле «Номенклатура» и включаем быстрый доступ;

![Отбор движения товаров](%D0%9E%D1%82%D0%B1%D0%BE%D1%80%20%D0%B4%D0%B2%D0%B8%D0%B6%D0%B5%D0%BD%D0%B8%D1%8F%20%D1%82%D0%BE%D0%B2%D0%B0%D1%80%D0%BE%D0%B2.png)

# Добавляем отчёт «ДоходыИРасходы»

- Создаём основную схему компоновки данных;
добавляем набор данных — запрос, в котором конструкцией «Объединить всё» объединяем два подзапроса:
в первом получаем номенклатуру, оборот по сумме с псевдонимом «Доходы» и 0 с псевдонимом «Расходы» из виртуальной таблицы «Обороты регистра Доходы»;

![Набор данных ДоходРасход](%D0%9D%D0%B0%D0%B1%D0%BE%D1%80%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%20%D0%94%D0%BE%D1%85%D0%BE%D0%B4%D0%A0%D0%B0%D1%81%D1%85%D0%BE%D0%B4.png)

во втором получаем номенклатуру, 0 с псевдонимом «Доходы» и оборот по сумме с псевдонимом «Расходы» из виртуальной таблицы «Обороты регистра Расходы»:

![Запрос доход расход](%D0%97%D0%B0%D0%BF%D1%80%D0%BE%D1%81%20%D0%B4%D0%BE%D1%85%D0%BE%D0%B4%20%D1%80%D0%B0%D1%81%D1%85%D0%BE%D0%B4.png)

добавляем вычисляемое поле «Прибыль» с выражением «Доходы — Расходы»;

![Вычисляемое поле](%D0%92%D1%8B%D1%87%D0%B8%D1%81%D0%BB%D1%8F%D0%B5%D0%BC%D0%BE%D0%B5%20%D0%BF%D0%BE%D0%BB%D0%B5.png)

на закладке «Ресурсы» добавляем все «Доходы»», «Расходы» и «Прибыль» с настройками по умолчанию;

![Ресурсы доход расход](%D0%A0%D0%B5%D1%81%D1%83%D1%80%D1%81%D1%8B%20%D0%B4%D0%BE%D1%85%D0%BE%D0%B4%20%D1%80%D0%B0%D1%81%D1%85%D0%BE%D0%B4.png)

в настройках:
добавляем группировку по номенклатуре с иерархией;
на закладке «Параметры» включаем использование автоматически добавленных параметров «Начало периода» и «Конец периода»; включаем их в пользовательские настройки с быстрым доступом;

![Настройки доход расход](%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B8%20%D0%B4%D0%BE%D1%85%D0%BE%D0%B4%20%D1%80%D0%B0%D1%81%D1%85%D0%BE%D0%B4.png)

выбираем поля «Номенклатура», «Доходы», «Расходы», «Прибыль»;

![Выбираемые поля доход расход](%D0%92%D1%8B%D0%B1%D0%B8%D1%80%D0%B0%D0%B5%D0%BC%D1%8B%D0%B5%20%D0%BF%D0%BE%D0%BB%D1%8F%20%D0%B4%D0%BE%D1%85%D0%BE%D0%B4%20%D1%80%D0%B0%D1%81%D1%85%D0%BE%D0%B4.png)